{"ast":null,"code":"import * as i1 from '@ngrx/store';\nimport { createAction, props, isNgrxMockEnvironment, select, ACTIVE_RUNTIME_CHECKS, createFeatureSelector, createSelector } from '@ngrx/store';\nimport * as i0 from '@angular/core';\nimport { InjectionToken, isDevMode, Injectable, Inject, makeEnvironmentProviders, ENVIRONMENT_INITIALIZER, inject, NgModule } from '@angular/core';\nimport * as i2 from '@angular/router';\nimport { NavigationStart, RoutesRecognized, NavigationCancel, NavigationError, NavigationEnd } from '@angular/router';\nimport { withLatestFrom } from 'rxjs/operators';\n/**\n * An action dispatched when a router navigation request is fired.\n */\n\nconst ROUTER_REQUEST = '@ngrx/router-store/request';\nconst routerRequestAction = createAction(ROUTER_REQUEST, props());\n/**\n * An action dispatched when the router navigates.\n */\n\nconst ROUTER_NAVIGATION = '@ngrx/router-store/navigation';\nconst routerNavigationAction = createAction(ROUTER_NAVIGATION, props());\n/**\n * An action dispatched when the router cancels navigation.\n */\n\nconst ROUTER_CANCEL = '@ngrx/router-store/cancel';\nconst routerCancelAction = createAction(ROUTER_CANCEL, props());\n/**\n * An action dispatched when the router errors.\n */\n\nconst ROUTER_ERROR = '@ngrx/router-store/error';\nconst routerErrorAction = createAction(ROUTER_ERROR, props());\n/**\n * An action dispatched after navigation has ended and new route is active.\n */\n\nconst ROUTER_NAVIGATED = '@ngrx/router-store/navigated';\nconst routerNavigatedAction = createAction(ROUTER_NAVIGATED, props());\n\nfunction routerReducer(state, action) {\n  // Allow compilation with strictFunctionTypes - ref: #1344\n  const routerAction = action;\n\n  switch (routerAction.type) {\n    case ROUTER_NAVIGATION:\n    case ROUTER_ERROR:\n    case ROUTER_CANCEL:\n      return {\n        state: routerAction.payload.routerState,\n        navigationId: routerAction.payload.event.id\n      };\n\n    default:\n      return state;\n  }\n}\n\nclass MinimalRouterStateSerializer {\n  serialize(routerState) {\n    return {\n      root: this.serializeRoute(routerState.root),\n      url: routerState.url\n    };\n  }\n\n  serializeRoute(route) {\n    const children = route.children.map(c => this.serializeRoute(c));\n    return {\n      params: route.params,\n      data: route.data,\n      url: route.url,\n      outlet: route.outlet,\n      title: route.title,\n      routeConfig: route.routeConfig ? {\n        path: route.routeConfig.path,\n        pathMatch: route.routeConfig.pathMatch,\n        redirectTo: route.routeConfig.redirectTo,\n        outlet: route.routeConfig.outlet,\n        title: typeof route.routeConfig.title === 'string' ? route.routeConfig.title : undefined\n      } : null,\n      queryParams: route.queryParams,\n      fragment: route.fragment,\n      firstChild: children[0],\n      children\n    };\n  }\n\n}\n\nvar NavigationActionTiming;\n\n(function (NavigationActionTiming) {\n  NavigationActionTiming[NavigationActionTiming[\"PreActivation\"] = 1] = \"PreActivation\";\n  NavigationActionTiming[NavigationActionTiming[\"PostActivation\"] = 2] = \"PostActivation\";\n})(NavigationActionTiming || (NavigationActionTiming = {}));\n\nconst DEFAULT_ROUTER_FEATURENAME = 'router';\n\nconst _ROUTER_CONFIG = new InjectionToken('@ngrx/router-store Internal Configuration');\n\nconst ROUTER_CONFIG = new InjectionToken('@ngrx/router-store Configuration');\n\nfunction _createRouterConfig(config) {\n  return {\n    stateKey: DEFAULT_ROUTER_FEATURENAME,\n    serializer: MinimalRouterStateSerializer,\n    navigationActionTiming: NavigationActionTiming.PreActivation,\n    ...config\n  };\n}\n\nclass FullRouterStateSerializer {\n  serialize(routerState) {\n    return {\n      root: this.serializeRoute(routerState.root),\n      url: routerState.url\n    };\n  }\n\n  serializeRoute(route) {\n    const children = route.children.map(c => this.serializeRoute(c));\n    return {\n      params: route.params,\n      paramMap: route.paramMap,\n      data: route.data,\n      url: route.url,\n      outlet: route.outlet,\n      title: route.title,\n      routeConfig: route.routeConfig ? {\n        component: route.routeConfig.component,\n        path: route.routeConfig.path,\n        pathMatch: route.routeConfig.pathMatch,\n        redirectTo: route.routeConfig.redirectTo,\n        outlet: route.routeConfig.outlet,\n        title: route.routeConfig.title\n      } : null,\n      queryParams: route.queryParams,\n      queryParamMap: route.queryParamMap,\n      fragment: route.fragment,\n      component: route.routeConfig ? route.routeConfig.component : undefined,\n      root: undefined,\n      parent: undefined,\n      firstChild: children[0],\n      pathFromRoot: undefined,\n      children\n    };\n  }\n\n}\n\nclass RouterStateSerializer {}\n\nvar RouterTrigger;\n\n(function (RouterTrigger) {\n  RouterTrigger[RouterTrigger[\"NONE\"] = 1] = \"NONE\";\n  RouterTrigger[RouterTrigger[\"ROUTER\"] = 2] = \"ROUTER\";\n  RouterTrigger[RouterTrigger[\"STORE\"] = 3] = \"STORE\";\n})(RouterTrigger || (RouterTrigger = {}));\n/**\n * Shared router initialization logic used alongside both the StoreRouterConnectingModule and the provideRouterStore\n * function\n */\n\n\nclass StoreRouterConnectingService {\n  constructor(store, router, serializer, errorHandler, config, activeRuntimeChecks) {\n    this.store = store;\n    this.router = router;\n    this.serializer = serializer;\n    this.errorHandler = errorHandler;\n    this.config = config;\n    this.activeRuntimeChecks = activeRuntimeChecks;\n    this.lastEvent = null;\n    this.routerState = null;\n    this.trigger = RouterTrigger.NONE;\n    this.stateKey = this.config.stateKey;\n\n    if (!isNgrxMockEnvironment() && isDevMode() && (activeRuntimeChecks?.strictActionSerializability || activeRuntimeChecks?.strictStateSerializability) && this.serializer instanceof FullRouterStateSerializer) {\n      console.warn('@ngrx/router-store: The serializability runtime checks cannot be enabled ' + 'with the FullRouterStateSerializer. The FullRouterStateSerializer ' + 'has an unserializable router state and actions that are not serializable. ' + 'To use the serializability runtime checks either use ' + 'the MinimalRouterStateSerializer or implement a custom router state serializer.');\n    }\n\n    this.setUpStoreStateListener();\n    this.setUpRouterEventsListener();\n  }\n\n  setUpStoreStateListener() {\n    this.store.pipe(select(this.stateKey), withLatestFrom(this.store)).subscribe(([routerStoreState, storeState]) => {\n      this.navigateIfNeeded(routerStoreState, storeState);\n    });\n  }\n\n  navigateIfNeeded(routerStoreState, storeState) {\n    if (!routerStoreState || !routerStoreState.state) {\n      return;\n    }\n\n    if (this.trigger === RouterTrigger.ROUTER) {\n      return;\n    }\n\n    if (this.lastEvent instanceof NavigationStart) {\n      return;\n    }\n\n    const url = routerStoreState.state.url;\n\n    if (!isSameUrl(this.router.url, url)) {\n      this.storeState = storeState;\n      this.trigger = RouterTrigger.STORE;\n      this.router.navigateByUrl(url).catch(error => {\n        this.errorHandler.handleError(error);\n      });\n    }\n  }\n\n  setUpRouterEventsListener() {\n    const dispatchNavLate = this.config.navigationActionTiming === NavigationActionTiming.PostActivation;\n    let routesRecognized;\n    this.router.events.pipe(withLatestFrom(this.store)).subscribe(([event, storeState]) => {\n      this.lastEvent = event;\n\n      if (event instanceof NavigationStart) {\n        this.routerState = this.serializer.serialize(this.router.routerState.snapshot);\n\n        if (this.trigger !== RouterTrigger.STORE) {\n          this.storeState = storeState;\n          this.dispatchRouterRequest(event);\n        }\n      } else if (event instanceof RoutesRecognized) {\n        routesRecognized = event;\n\n        if (!dispatchNavLate && this.trigger !== RouterTrigger.STORE) {\n          this.dispatchRouterNavigation(event);\n        }\n      } else if (event instanceof NavigationCancel) {\n        this.dispatchRouterCancel(event);\n        this.reset();\n      } else if (event instanceof NavigationError) {\n        this.dispatchRouterError(event);\n        this.reset();\n      } else if (event instanceof NavigationEnd) {\n        if (this.trigger !== RouterTrigger.STORE) {\n          if (dispatchNavLate) {\n            this.dispatchRouterNavigation(routesRecognized);\n          }\n\n          this.dispatchRouterNavigated(event);\n        }\n\n        this.reset();\n      }\n    });\n  }\n\n  dispatchRouterRequest(event) {\n    this.dispatchRouterAction(ROUTER_REQUEST, {\n      event\n    });\n  }\n\n  dispatchRouterNavigation(lastRoutesRecognized) {\n    const nextRouterState = this.serializer.serialize(lastRoutesRecognized.state);\n    this.dispatchRouterAction(ROUTER_NAVIGATION, {\n      routerState: nextRouterState,\n      event: new RoutesRecognized(lastRoutesRecognized.id, lastRoutesRecognized.url, lastRoutesRecognized.urlAfterRedirects, nextRouterState)\n    });\n  }\n\n  dispatchRouterCancel(event) {\n    this.dispatchRouterAction(ROUTER_CANCEL, {\n      storeState: this.storeState,\n      event\n    });\n  }\n\n  dispatchRouterError(event) {\n    this.dispatchRouterAction(ROUTER_ERROR, {\n      storeState: this.storeState,\n      event: new NavigationError(event.id, event.url, `${event}`)\n    });\n  }\n\n  dispatchRouterNavigated(event) {\n    const routerState = this.serializer.serialize(this.router.routerState.snapshot);\n    this.dispatchRouterAction(ROUTER_NAVIGATED, {\n      event,\n      routerState\n    });\n  }\n\n  dispatchRouterAction(type, payload) {\n    this.trigger = RouterTrigger.ROUTER;\n\n    try {\n      this.store.dispatch({\n        type,\n        payload: {\n          routerState: this.routerState,\n          ...payload,\n          event: this.config.routerState === 0\n          /* RouterState.Full */\n          ? payload.event : {\n            id: payload.event.id,\n            url: payload.event.url,\n            // safe, as it will just be `undefined` for non-NavigationEnd router events\n            urlAfterRedirects: payload.event.urlAfterRedirects\n          }\n        }\n      });\n    } finally {\n      this.trigger = RouterTrigger.NONE;\n    }\n  }\n\n  reset() {\n    this.trigger = RouterTrigger.NONE;\n    this.storeState = null;\n    this.routerState = null;\n  }\n\n}\n/** @nocollapse */\n\n\nStoreRouterConnectingService.ɵfac = function StoreRouterConnectingService_Factory(t) {\n  return new (t || StoreRouterConnectingService)(i0.ɵɵinject(i1.Store), i0.ɵɵinject(i2.Router), i0.ɵɵinject(RouterStateSerializer), i0.ɵɵinject(i0.ErrorHandler), i0.ɵɵinject(ROUTER_CONFIG), i0.ɵɵinject(ACTIVE_RUNTIME_CHECKS));\n};\n/** @nocollapse */\n\n\nStoreRouterConnectingService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: StoreRouterConnectingService,\n  factory: StoreRouterConnectingService.ɵfac\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(StoreRouterConnectingService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: i1.Store\n    }, {\n      type: i2.Router\n    }, {\n      type: RouterStateSerializer\n    }, {\n      type: i0.ErrorHandler\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [ROUTER_CONFIG]\n      }]\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [ACTIVE_RUNTIME_CHECKS]\n      }]\n    }];\n  }, null);\n})();\n/**\n * Check if the URLs are matching. Accounts for the possibility of trailing \"/\" in url.\n */\n\n\nfunction isSameUrl(first, second) {\n  return stripTrailingSlash(first) === stripTrailingSlash(second);\n}\n\nfunction stripTrailingSlash(text) {\n  if (text?.length > 0 && text[text.length - 1] === '/') {\n    return text.substring(0, text.length - 1);\n  }\n\n  return text;\n}\n/**\n * Connects the Angular Router to the Store.\n *\n * @usageNotes\n *\n * ```ts\n * bootstrapApplication(AppComponent, {\n *   providers: [\n *     provideStore({ router: routerReducer }),\n *     provideRouterStore(),\n *   ],\n * });\n * ```\n */\n\n\nfunction provideRouterStore(config = {}) {\n  return makeEnvironmentProviders([{\n    provide: _ROUTER_CONFIG,\n    useValue: config\n  }, {\n    provide: ROUTER_CONFIG,\n    useFactory: _createRouterConfig,\n    deps: [_ROUTER_CONFIG]\n  }, {\n    provide: RouterStateSerializer,\n    useClass: config.serializer ? config.serializer : config.routerState === 0\n    /* RouterState.Full */\n    ? FullRouterStateSerializer : MinimalRouterStateSerializer\n  }, {\n    provide: ENVIRONMENT_INITIALIZER,\n    multi: true,\n\n    useFactory() {\n      return () => inject(StoreRouterConnectingService);\n    }\n\n  }, StoreRouterConnectingService]);\n}\n/**\n * Connects RouterModule with StoreModule.\n *\n * During the navigation, before any guards or resolvers run, the router will dispatch\n * a ROUTER_NAVIGATION action, which has the following signature:\n *\n * ```\n * export type RouterNavigationPayload = {\n *   routerState: SerializedRouterStateSnapshot,\n *   event: RoutesRecognized\n * }\n * ```\n *\n * Either a reducer or an effect can be invoked in response to this action.\n * If the invoked reducer throws, the navigation will be canceled.\n *\n * If navigation gets canceled because of a guard, a ROUTER_CANCEL action will be\n * dispatched. If navigation results in an error, a ROUTER_ERROR action will be dispatched.\n *\n * Both ROUTER_CANCEL and ROUTER_ERROR contain the store state before the navigation\n * which can be used to restore the consistency of the store.\n *\n * Usage:\n *\n * ```typescript\n * @NgModule({\n *   declarations: [AppCmp, SimpleCmp],\n *   imports: [\n *     BrowserModule,\n *     StoreModule.forRoot(mapOfReducers),\n *     RouterModule.forRoot([\n *       { path: '', component: SimpleCmp },\n *       { path: 'next', component: SimpleCmp }\n *     ]),\n *     StoreRouterConnectingModule.forRoot()\n *   ],\n *   bootstrap: [AppCmp]\n * })\n * export class AppModule {\n * }\n * ```\n */\n\n\nclass StoreRouterConnectingModule {\n  static forRoot(config = {}) {\n    return {\n      ngModule: StoreRouterConnectingModule,\n      providers: [provideRouterStore(config)]\n    };\n  }\n\n}\n/** @nocollapse */\n\n\nStoreRouterConnectingModule.ɵfac = function StoreRouterConnectingModule_Factory(t) {\n  return new (t || StoreRouterConnectingModule)();\n};\n/** @nocollapse */\n\n\nStoreRouterConnectingModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: StoreRouterConnectingModule\n});\n/** @nocollapse */\n\nStoreRouterConnectingModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(StoreRouterConnectingModule, [{\n    type: NgModule,\n    args: [{}]\n  }], null, null);\n})();\n\nfunction createRouterSelector() {\n  return createFeatureSelector(DEFAULT_ROUTER_FEATURENAME);\n}\n\nfunction getSelectors(selectState = createRouterSelector()) {\n  const selectRouterState = createSelector(selectState, router => router && router.state);\n  const selectRootRoute = createSelector(selectRouterState, routerState => routerState && routerState.root);\n  const selectCurrentRoute = createSelector(selectRootRoute, rootRoute => {\n    if (!rootRoute) {\n      return undefined;\n    }\n\n    let route = rootRoute;\n\n    while (route.firstChild) {\n      route = route.firstChild;\n    }\n\n    return route;\n  });\n  const selectFragment = createSelector(selectRootRoute, route => route && route.fragment);\n  const selectQueryParams = createSelector(selectRootRoute, route => route && route.queryParams);\n\n  const selectQueryParam = param => createSelector(selectQueryParams, params => params && params[param]);\n\n  const selectRouteParams = createSelector(selectCurrentRoute, route => route && route.params);\n\n  const selectRouteParam = param => createSelector(selectRouteParams, params => params && params[param]);\n\n  const selectRouteData = createSelector(selectCurrentRoute, route => route && route.data);\n\n  const selectRouteDataParam = param => createSelector(selectRouteData, data => data && data[param]);\n\n  const selectUrl = createSelector(selectRouterState, routerState => routerState && routerState.url);\n  const selectTitle = createSelector(selectCurrentRoute, route => {\n    if (!route?.routeConfig) {\n      return undefined;\n    }\n\n    return typeof route.routeConfig.title === 'string' ? route.routeConfig.title // static title\n    : route.title; // resolved title\n  });\n  return {\n    selectCurrentRoute,\n    selectFragment,\n    selectQueryParams,\n    selectQueryParam,\n    selectRouteParams,\n    selectRouteParam,\n    selectRouteData,\n    selectRouteDataParam,\n    selectUrl,\n    selectTitle\n  };\n}\n/**\n * DO NOT EDIT\n *\n * This file is automatically generated at build\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { DEFAULT_ROUTER_FEATURENAME, FullRouterStateSerializer, MinimalRouterStateSerializer, NavigationActionTiming, ROUTER_CANCEL, ROUTER_CONFIG, ROUTER_ERROR, ROUTER_NAVIGATED, ROUTER_NAVIGATION, ROUTER_REQUEST, RouterStateSerializer, StoreRouterConnectingModule, createRouterSelector, getSelectors, provideRouterStore, routerCancelAction, routerErrorAction, routerNavigatedAction, routerNavigationAction, routerReducer, routerRequestAction };","map":{"version":3,"names":["i1","createAction","props","isNgrxMockEnvironment","select","ACTIVE_RUNTIME_CHECKS","createFeatureSelector","createSelector","i0","InjectionToken","isDevMode","Injectable","Inject","makeEnvironmentProviders","ENVIRONMENT_INITIALIZER","inject","NgModule","i2","NavigationStart","RoutesRecognized","NavigationCancel","NavigationError","NavigationEnd","withLatestFrom","ROUTER_REQUEST","routerRequestAction","ROUTER_NAVIGATION","routerNavigationAction","ROUTER_CANCEL","routerCancelAction","ROUTER_ERROR","routerErrorAction","ROUTER_NAVIGATED","routerNavigatedAction","routerReducer","state","action","routerAction","type","payload","routerState","navigationId","event","id","MinimalRouterStateSerializer","serialize","root","serializeRoute","url","route","children","map","c","params","data","outlet","title","routeConfig","path","pathMatch","redirectTo","undefined","queryParams","fragment","firstChild","NavigationActionTiming","DEFAULT_ROUTER_FEATURENAME","_ROUTER_CONFIG","ROUTER_CONFIG","_createRouterConfig","config","stateKey","serializer","navigationActionTiming","PreActivation","FullRouterStateSerializer","paramMap","component","queryParamMap","parent","pathFromRoot","RouterStateSerializer","RouterTrigger","StoreRouterConnectingService","constructor","store","router","errorHandler","activeRuntimeChecks","lastEvent","trigger","NONE","strictActionSerializability","strictStateSerializability","console","warn","setUpStoreStateListener","setUpRouterEventsListener","pipe","subscribe","routerStoreState","storeState","navigateIfNeeded","ROUTER","isSameUrl","STORE","navigateByUrl","catch","error","handleError","dispatchNavLate","PostActivation","routesRecognized","events","snapshot","dispatchRouterRequest","dispatchRouterNavigation","dispatchRouterCancel","reset","dispatchRouterError","dispatchRouterNavigated","dispatchRouterAction","lastRoutesRecognized","nextRouterState","urlAfterRedirects","dispatch","ɵfac","Store","Router","ErrorHandler","ɵprov","decorators","args","first","second","stripTrailingSlash","text","length","substring","provideRouterStore","provide","useValue","useFactory","deps","useClass","multi","StoreRouterConnectingModule","forRoot","ngModule","providers","ɵmod","ɵinj","createRouterSelector","getSelectors","selectState","selectRouterState","selectRootRoute","selectCurrentRoute","rootRoute","selectFragment","selectQueryParams","selectQueryParam","param","selectRouteParams","selectRouteParam","selectRouteData","selectRouteDataParam","selectUrl","selectTitle"],"sources":["/home/asplap1973/ngrx/FrontEnd/node_modules/@ngrx/router-store/fesm2020/ngrx-router-store.mjs"],"sourcesContent":["import * as i1 from '@ngrx/store';\nimport { createAction, props, isNgrxMockEnvironment, select, ACTIVE_RUNTIME_CHECKS, createFeatureSelector, createSelector } from '@ngrx/store';\nimport * as i0 from '@angular/core';\nimport { InjectionToken, isDevMode, Injectable, Inject, makeEnvironmentProviders, ENVIRONMENT_INITIALIZER, inject, NgModule } from '@angular/core';\nimport * as i2 from '@angular/router';\nimport { NavigationStart, RoutesRecognized, NavigationCancel, NavigationError, NavigationEnd } from '@angular/router';\nimport { withLatestFrom } from 'rxjs/operators';\n\n/**\n * An action dispatched when a router navigation request is fired.\n */\nconst ROUTER_REQUEST = '@ngrx/router-store/request';\nconst routerRequestAction = createAction(ROUTER_REQUEST, props());\n/**\n * An action dispatched when the router navigates.\n */\nconst ROUTER_NAVIGATION = '@ngrx/router-store/navigation';\nconst routerNavigationAction = createAction(ROUTER_NAVIGATION, props());\n/**\n * An action dispatched when the router cancels navigation.\n */\nconst ROUTER_CANCEL = '@ngrx/router-store/cancel';\nconst routerCancelAction = createAction(ROUTER_CANCEL, props());\n/**\n * An action dispatched when the router errors.\n */\nconst ROUTER_ERROR = '@ngrx/router-store/error';\nconst routerErrorAction = createAction(ROUTER_ERROR, props());\n/**\n * An action dispatched after navigation has ended and new route is active.\n */\nconst ROUTER_NAVIGATED = '@ngrx/router-store/navigated';\nconst routerNavigatedAction = createAction(ROUTER_NAVIGATED, props());\n\nfunction routerReducer(state, action) {\n    // Allow compilation with strictFunctionTypes - ref: #1344\n    const routerAction = action;\n    switch (routerAction.type) {\n        case ROUTER_NAVIGATION:\n        case ROUTER_ERROR:\n        case ROUTER_CANCEL:\n            return {\n                state: routerAction.payload.routerState,\n                navigationId: routerAction.payload.event.id,\n            };\n        default:\n            return state;\n    }\n}\n\nclass MinimalRouterStateSerializer {\n    serialize(routerState) {\n        return {\n            root: this.serializeRoute(routerState.root),\n            url: routerState.url,\n        };\n    }\n    serializeRoute(route) {\n        const children = route.children.map((c) => this.serializeRoute(c));\n        return {\n            params: route.params,\n            data: route.data,\n            url: route.url,\n            outlet: route.outlet,\n            title: route.title,\n            routeConfig: route.routeConfig\n                ? {\n                    path: route.routeConfig.path,\n                    pathMatch: route.routeConfig.pathMatch,\n                    redirectTo: route.routeConfig.redirectTo,\n                    outlet: route.routeConfig.outlet,\n                    title: typeof route.routeConfig.title === 'string'\n                        ? route.routeConfig.title\n                        : undefined,\n                }\n                : null,\n            queryParams: route.queryParams,\n            fragment: route.fragment,\n            firstChild: children[0],\n            children,\n        };\n    }\n}\n\nvar NavigationActionTiming;\n(function (NavigationActionTiming) {\n    NavigationActionTiming[NavigationActionTiming[\"PreActivation\"] = 1] = \"PreActivation\";\n    NavigationActionTiming[NavigationActionTiming[\"PostActivation\"] = 2] = \"PostActivation\";\n})(NavigationActionTiming || (NavigationActionTiming = {}));\nconst DEFAULT_ROUTER_FEATURENAME = 'router';\nconst _ROUTER_CONFIG = new InjectionToken('@ngrx/router-store Internal Configuration');\nconst ROUTER_CONFIG = new InjectionToken('@ngrx/router-store Configuration');\nfunction _createRouterConfig(config) {\n    return {\n        stateKey: DEFAULT_ROUTER_FEATURENAME,\n        serializer: MinimalRouterStateSerializer,\n        navigationActionTiming: NavigationActionTiming.PreActivation,\n        ...config,\n    };\n}\n\nclass FullRouterStateSerializer {\n    serialize(routerState) {\n        return {\n            root: this.serializeRoute(routerState.root),\n            url: routerState.url,\n        };\n    }\n    serializeRoute(route) {\n        const children = route.children.map((c) => this.serializeRoute(c));\n        return {\n            params: route.params,\n            paramMap: route.paramMap,\n            data: route.data,\n            url: route.url,\n            outlet: route.outlet,\n            title: route.title,\n            routeConfig: route.routeConfig\n                ? {\n                    component: route.routeConfig.component,\n                    path: route.routeConfig.path,\n                    pathMatch: route.routeConfig.pathMatch,\n                    redirectTo: route.routeConfig.redirectTo,\n                    outlet: route.routeConfig.outlet,\n                    title: route.routeConfig.title,\n                }\n                : null,\n            queryParams: route.queryParams,\n            queryParamMap: route.queryParamMap,\n            fragment: route.fragment,\n            component: (route.routeConfig\n                ? route.routeConfig.component\n                : undefined),\n            root: undefined,\n            parent: undefined,\n            firstChild: children[0],\n            pathFromRoot: undefined,\n            children,\n        };\n    }\n}\n\nclass RouterStateSerializer {\n}\n\nvar RouterTrigger;\n(function (RouterTrigger) {\n    RouterTrigger[RouterTrigger[\"NONE\"] = 1] = \"NONE\";\n    RouterTrigger[RouterTrigger[\"ROUTER\"] = 2] = \"ROUTER\";\n    RouterTrigger[RouterTrigger[\"STORE\"] = 3] = \"STORE\";\n})(RouterTrigger || (RouterTrigger = {}));\n/**\n * Shared router initialization logic used alongside both the StoreRouterConnectingModule and the provideRouterStore\n * function\n */\nclass StoreRouterConnectingService {\n    constructor(store, router, serializer, errorHandler, config, activeRuntimeChecks) {\n        this.store = store;\n        this.router = router;\n        this.serializer = serializer;\n        this.errorHandler = errorHandler;\n        this.config = config;\n        this.activeRuntimeChecks = activeRuntimeChecks;\n        this.lastEvent = null;\n        this.routerState = null;\n        this.trigger = RouterTrigger.NONE;\n        this.stateKey = this.config.stateKey;\n        if (!isNgrxMockEnvironment() &&\n            isDevMode() &&\n            (activeRuntimeChecks?.strictActionSerializability ||\n                activeRuntimeChecks?.strictStateSerializability) &&\n            this.serializer instanceof FullRouterStateSerializer) {\n            console.warn('@ngrx/router-store: The serializability runtime checks cannot be enabled ' +\n                'with the FullRouterStateSerializer. The FullRouterStateSerializer ' +\n                'has an unserializable router state and actions that are not serializable. ' +\n                'To use the serializability runtime checks either use ' +\n                'the MinimalRouterStateSerializer or implement a custom router state serializer.');\n        }\n        this.setUpStoreStateListener();\n        this.setUpRouterEventsListener();\n    }\n    setUpStoreStateListener() {\n        this.store\n            .pipe(select(this.stateKey), withLatestFrom(this.store))\n            .subscribe(([routerStoreState, storeState]) => {\n            this.navigateIfNeeded(routerStoreState, storeState);\n        });\n    }\n    navigateIfNeeded(routerStoreState, storeState) {\n        if (!routerStoreState || !routerStoreState.state) {\n            return;\n        }\n        if (this.trigger === RouterTrigger.ROUTER) {\n            return;\n        }\n        if (this.lastEvent instanceof NavigationStart) {\n            return;\n        }\n        const url = routerStoreState.state.url;\n        if (!isSameUrl(this.router.url, url)) {\n            this.storeState = storeState;\n            this.trigger = RouterTrigger.STORE;\n            this.router.navigateByUrl(url).catch((error) => {\n                this.errorHandler.handleError(error);\n            });\n        }\n    }\n    setUpRouterEventsListener() {\n        const dispatchNavLate = this.config.navigationActionTiming ===\n            NavigationActionTiming.PostActivation;\n        let routesRecognized;\n        this.router.events\n            .pipe(withLatestFrom(this.store))\n            .subscribe(([event, storeState]) => {\n            this.lastEvent = event;\n            if (event instanceof NavigationStart) {\n                this.routerState = this.serializer.serialize(this.router.routerState.snapshot);\n                if (this.trigger !== RouterTrigger.STORE) {\n                    this.storeState = storeState;\n                    this.dispatchRouterRequest(event);\n                }\n            }\n            else if (event instanceof RoutesRecognized) {\n                routesRecognized = event;\n                if (!dispatchNavLate && this.trigger !== RouterTrigger.STORE) {\n                    this.dispatchRouterNavigation(event);\n                }\n            }\n            else if (event instanceof NavigationCancel) {\n                this.dispatchRouterCancel(event);\n                this.reset();\n            }\n            else if (event instanceof NavigationError) {\n                this.dispatchRouterError(event);\n                this.reset();\n            }\n            else if (event instanceof NavigationEnd) {\n                if (this.trigger !== RouterTrigger.STORE) {\n                    if (dispatchNavLate) {\n                        this.dispatchRouterNavigation(routesRecognized);\n                    }\n                    this.dispatchRouterNavigated(event);\n                }\n                this.reset();\n            }\n        });\n    }\n    dispatchRouterRequest(event) {\n        this.dispatchRouterAction(ROUTER_REQUEST, { event });\n    }\n    dispatchRouterNavigation(lastRoutesRecognized) {\n        const nextRouterState = this.serializer.serialize(lastRoutesRecognized.state);\n        this.dispatchRouterAction(ROUTER_NAVIGATION, {\n            routerState: nextRouterState,\n            event: new RoutesRecognized(lastRoutesRecognized.id, lastRoutesRecognized.url, lastRoutesRecognized.urlAfterRedirects, nextRouterState),\n        });\n    }\n    dispatchRouterCancel(event) {\n        this.dispatchRouterAction(ROUTER_CANCEL, {\n            storeState: this.storeState,\n            event,\n        });\n    }\n    dispatchRouterError(event) {\n        this.dispatchRouterAction(ROUTER_ERROR, {\n            storeState: this.storeState,\n            event: new NavigationError(event.id, event.url, `${event}`),\n        });\n    }\n    dispatchRouterNavigated(event) {\n        const routerState = this.serializer.serialize(this.router.routerState.snapshot);\n        this.dispatchRouterAction(ROUTER_NAVIGATED, { event, routerState });\n    }\n    dispatchRouterAction(type, payload) {\n        this.trigger = RouterTrigger.ROUTER;\n        try {\n            this.store.dispatch({\n                type,\n                payload: {\n                    routerState: this.routerState,\n                    ...payload,\n                    event: this.config.routerState === 0 /* RouterState.Full */\n                        ? payload.event\n                        : {\n                            id: payload.event.id,\n                            url: payload.event.url,\n                            // safe, as it will just be `undefined` for non-NavigationEnd router events\n                            urlAfterRedirects: payload.event\n                                .urlAfterRedirects,\n                        },\n                },\n            });\n        }\n        finally {\n            this.trigger = RouterTrigger.NONE;\n        }\n    }\n    reset() {\n        this.trigger = RouterTrigger.NONE;\n        this.storeState = null;\n        this.routerState = null;\n    }\n}\n/** @nocollapse */ StoreRouterConnectingService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.0\", ngImport: i0, type: StoreRouterConnectingService, deps: [{ token: i1.Store }, { token: i2.Router }, { token: RouterStateSerializer }, { token: i0.ErrorHandler }, { token: ROUTER_CONFIG }, { token: ACTIVE_RUNTIME_CHECKS }], target: i0.ɵɵFactoryTarget.Injectable });\n/** @nocollapse */ StoreRouterConnectingService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"15.0.0\", ngImport: i0, type: StoreRouterConnectingService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.0\", ngImport: i0, type: StoreRouterConnectingService, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: i1.Store }, { type: i2.Router }, { type: RouterStateSerializer }, { type: i0.ErrorHandler }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [ROUTER_CONFIG]\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [ACTIVE_RUNTIME_CHECKS]\n                }] }]; } });\n/**\n * Check if the URLs are matching. Accounts for the possibility of trailing \"/\" in url.\n */\nfunction isSameUrl(first, second) {\n    return stripTrailingSlash(first) === stripTrailingSlash(second);\n}\nfunction stripTrailingSlash(text) {\n    if (text?.length > 0 && text[text.length - 1] === '/') {\n        return text.substring(0, text.length - 1);\n    }\n    return text;\n}\n\n/**\n * Connects the Angular Router to the Store.\n *\n * @usageNotes\n *\n * ```ts\n * bootstrapApplication(AppComponent, {\n *   providers: [\n *     provideStore({ router: routerReducer }),\n *     provideRouterStore(),\n *   ],\n * });\n * ```\n */\nfunction provideRouterStore(config = {}) {\n    return makeEnvironmentProviders([\n        { provide: _ROUTER_CONFIG, useValue: config },\n        {\n            provide: ROUTER_CONFIG,\n            useFactory: _createRouterConfig,\n            deps: [_ROUTER_CONFIG],\n        },\n        {\n            provide: RouterStateSerializer,\n            useClass: config.serializer\n                ? config.serializer\n                : config.routerState === 0 /* RouterState.Full */\n                    ? FullRouterStateSerializer\n                    : MinimalRouterStateSerializer,\n        },\n        {\n            provide: ENVIRONMENT_INITIALIZER,\n            multi: true,\n            useFactory() {\n                return () => inject(StoreRouterConnectingService);\n            },\n        },\n        StoreRouterConnectingService,\n    ]);\n}\n\n/**\n * Connects RouterModule with StoreModule.\n *\n * During the navigation, before any guards or resolvers run, the router will dispatch\n * a ROUTER_NAVIGATION action, which has the following signature:\n *\n * ```\n * export type RouterNavigationPayload = {\n *   routerState: SerializedRouterStateSnapshot,\n *   event: RoutesRecognized\n * }\n * ```\n *\n * Either a reducer or an effect can be invoked in response to this action.\n * If the invoked reducer throws, the navigation will be canceled.\n *\n * If navigation gets canceled because of a guard, a ROUTER_CANCEL action will be\n * dispatched. If navigation results in an error, a ROUTER_ERROR action will be dispatched.\n *\n * Both ROUTER_CANCEL and ROUTER_ERROR contain the store state before the navigation\n * which can be used to restore the consistency of the store.\n *\n * Usage:\n *\n * ```typescript\n * @NgModule({\n *   declarations: [AppCmp, SimpleCmp],\n *   imports: [\n *     BrowserModule,\n *     StoreModule.forRoot(mapOfReducers),\n *     RouterModule.forRoot([\n *       { path: '', component: SimpleCmp },\n *       { path: 'next', component: SimpleCmp }\n *     ]),\n *     StoreRouterConnectingModule.forRoot()\n *   ],\n *   bootstrap: [AppCmp]\n * })\n * export class AppModule {\n * }\n * ```\n */\nclass StoreRouterConnectingModule {\n    static forRoot(config = {}) {\n        return {\n            ngModule: StoreRouterConnectingModule,\n            providers: [provideRouterStore(config)],\n        };\n    }\n}\n/** @nocollapse */ StoreRouterConnectingModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.0\", ngImport: i0, type: StoreRouterConnectingModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\n/** @nocollapse */ StoreRouterConnectingModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"14.0.0\", version: \"15.0.0\", ngImport: i0, type: StoreRouterConnectingModule });\n/** @nocollapse */ StoreRouterConnectingModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"15.0.0\", ngImport: i0, type: StoreRouterConnectingModule });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.0\", ngImport: i0, type: StoreRouterConnectingModule, decorators: [{\n            type: NgModule,\n            args: [{}]\n        }] });\n\nfunction createRouterSelector() {\n    return createFeatureSelector(DEFAULT_ROUTER_FEATURENAME);\n}\nfunction getSelectors(selectState = createRouterSelector()) {\n    const selectRouterState = createSelector(selectState, (router) => router && router.state);\n    const selectRootRoute = createSelector(selectRouterState, (routerState) => routerState && routerState.root);\n    const selectCurrentRoute = createSelector(selectRootRoute, (rootRoute) => {\n        if (!rootRoute) {\n            return undefined;\n        }\n        let route = rootRoute;\n        while (route.firstChild) {\n            route = route.firstChild;\n        }\n        return route;\n    });\n    const selectFragment = createSelector(selectRootRoute, (route) => route && route.fragment);\n    const selectQueryParams = createSelector(selectRootRoute, (route) => route && route.queryParams);\n    const selectQueryParam = (param) => createSelector(selectQueryParams, (params) => params && params[param]);\n    const selectRouteParams = createSelector(selectCurrentRoute, (route) => route && route.params);\n    const selectRouteParam = (param) => createSelector(selectRouteParams, (params) => params && params[param]);\n    const selectRouteData = createSelector(selectCurrentRoute, (route) => route && route.data);\n    const selectRouteDataParam = (param) => createSelector(selectRouteData, (data) => data && data[param]);\n    const selectUrl = createSelector(selectRouterState, (routerState) => routerState && routerState.url);\n    const selectTitle = createSelector(selectCurrentRoute, (route) => {\n        if (!route?.routeConfig) {\n            return undefined;\n        }\n        return typeof route.routeConfig.title === 'string'\n            ? route.routeConfig.title // static title\n            : route.title; // resolved title\n    });\n    return {\n        selectCurrentRoute,\n        selectFragment,\n        selectQueryParams,\n        selectQueryParam,\n        selectRouteParams,\n        selectRouteParam,\n        selectRouteData,\n        selectRouteDataParam,\n        selectUrl,\n        selectTitle,\n    };\n}\n\n/**\n * DO NOT EDIT\n *\n * This file is automatically generated at build\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { DEFAULT_ROUTER_FEATURENAME, FullRouterStateSerializer, MinimalRouterStateSerializer, NavigationActionTiming, ROUTER_CANCEL, ROUTER_CONFIG, ROUTER_ERROR, ROUTER_NAVIGATED, ROUTER_NAVIGATION, ROUTER_REQUEST, RouterStateSerializer, StoreRouterConnectingModule, createRouterSelector, getSelectors, provideRouterStore, routerCancelAction, routerErrorAction, routerNavigatedAction, routerNavigationAction, routerReducer, routerRequestAction };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}